<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creator Game</title>
<style>
body { margin: 0; overflow: hidden; background: #87CEEB; touch-action: none; }
canvas { display: block; }

.button {
    position: fixed;
    bottom: 20px;
    width: 70px;
    height: 70px;
    background: rgba(0,0,0,0.4);
    border-radius: 50%;
}

#left { left: 20px; }
#right { left: 110px; }
#jump { right: 110px; }
#attack { right: 20px; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="left" class="button"></div>
<div id="right" class="button"></div>
<div id="jump" class="button"></div>
<div id="attack" class="button"></div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let gravity = 0.6;
let cameraX = 0;

const player = {
    x: 100,
    y: 0,
    width: 64,
    height: 64,
    velocityX: 0,
    velocityY: 0,
    speed: 5,
    jumpPower: 15,
    grounded: false
};

const enemies = [
    { x: 600, y: 0, width: 50, height: 50, alive: true }
];

const img = new Image();
img.src = "character.png";

let moveLeft = false;
let moveRight = false;
let jump = false;
let attack = false;

function setupTouch(id, variable) {
    document.getElementById(id).ontouchstart = () => variable(true);
    document.getElementById(id).ontouchend = () => variable(false);
}

setupTouch("left", v => moveLeft = v);
setupTouch("right", v => moveRight = v);
setupTouch("jump", v => jump = v);
setupTouch("attack", v => attack = v);

function update() {

    if (moveRight) player.velocityX = player.speed;
    else if (moveLeft) player.velocityX = -player.speed;
    else player.velocityX = 0;

    if (jump && player.grounded) {
        player.velocityY = -player.jumpPower;
        player.grounded = false;
    }

    player.velocityY += gravity;

    player.x += player.velocityX;
    player.y += player.velocityY;

    let groundY = canvas.height - 120;

    if (player.y + player.height > groundY) {
        player.y = groundY - player.height;
        player.velocityY = 0;
        player.grounded = true;
    }

    if (attack) {
        enemies.forEach(e => {
            if (e.alive &&
                player.x < e.x + e.width &&
                player.x + player.width > e.x &&
                player.y < e.y + e.height &&
                player.y + player.height > e.y) {
                e.alive = false;
            }
        });
    }

    cameraX = player.x - 150;
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.save();
    ctx.translate(-cameraX, 0);

    ctx.fillStyle = "#228B22";
    ctx.fillRect(-1000, canvas.height - 120, 5000, 120);

    enemies.forEach(e => {
        if (e.alive) {
            e.y = canvas.height - 170;
            ctx.fillStyle = "red";
            ctx.fillRect(e.x, e.y, e.width, e.height);
        }
    });

    ctx.drawImage(img, player.x, player.y, player.width, player.height);

    ctx.restore();
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

img.onload = () => {
    player.y = canvas.height - 184;
    gameLoop();
};
</script>

</body>
</html>
